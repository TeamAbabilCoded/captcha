<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Normal Captcha</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="captcha-container">
    <h3>üõ°Ô∏è Selesaikan Captcha</h3>
    <form id="captchaForm">
      <label for="captcha">Masukkan angka berikut:</label><br>
      <span id="captchaText"></span>
      <input type="text" id="captchaInput" required />
      <button type="submit">Kirim</button>
    </form>
  </div>

  <script src="script.js"></script>
  <script>
    // Buat captcha acak
    const captchaText = document.getElementById("captchaText");
    const captcha = Math.floor(Math.random() * 9000 + 1000).toString();
    captchaText.textContent = captcha;

    document.getElementById("captchaForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const input = document.getElementById("captchaInput").value;
      if (input === captcha) {
        // Kirim klaim poin ke backend kamu
        const userId = new URLSearchParams(window.location.search).get("user_id");
        await fetch(`https://fluxion-fastapi.onrender.com/captcha/claim`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ user_id: userId, jenis: "normal" })
        });
        alert("üéâ Captcha berhasil! Poin akan segera dikirim.");
      } else {
        alert("‚ùå Captcha salah, coba lagi.");
      }
    });
  </script>
</body>
</html>
